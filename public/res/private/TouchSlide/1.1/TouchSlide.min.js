var TouchSlide=function(e){var n={slideCell:(e=e||{}).slideCell||"#touchSlide",titCell:e.titCell||".hd li",mainCell:e.mainCell||".bd",effect:e.effect||"left",autoPlay:e.autoPlay||!1,delayTime:e.delayTime||200,interTime:e.interTime||2500,defaultIndex:e.defaultIndex||0,titOnClassName:e.titOnClassName||"on",autoPage:e.autoPage||!1,prevCell:e.prevCell||".prev",nextCell:e.nextCell||".next",pageStateCell:e.pageStateCell||".pageState",pnLoop:"undefined "==e.pnLoop||e.pnLoop,startFun:e.startFun||null,endFun:e.endFun||null,switchLoad:e.switchLoad||null},t=document.getElementById(n.slideCell.replace("#",""));if(!t)return!1;function a(e,t){e=e.split(" ");var n=[],a=[t=t||document];for(var l in e)0!=e[l].length&&n.push(e[l]);for(var l in n){if(0==a.length)return!1;var i=[];for(var r in a)if("#"==n[l][0])i.push(document.getElementById(n[l].replace("#","")));else if("."==n[l][0])for(var o=a[r].getElementsByTagName("*"),s=0;s<o.length;s++){var c=o[s].className;c&&-1!=c.search(new RegExp("\\b"+n[l].replace(".","")+"\\b"))&&i.push(o[s])}else for(o=a[r].getElementsByTagName(n[l]),s=0;s<o.length;s++)i.push(o[s]);a=i}return 0!=a.length&&a[0]!=t&&a}function l(e,t){!e||!t||e.className&&-1!=e.className.search(new RegExp("\\b"+t+"\\b"))||(e.className+=(e.className?" ":"")+t)}function i(e,t){!e||!t||e.className&&-1==e.className.search(new RegExp("\\b"+t+"\\b"))||(e.className=e.className.replace(new RegExp("\\s*\\b"+t+"\\b","g"),""))}var r=n.effect,o=a(n.prevCell,t)[0],s=a(n.nextCell,t)[0],c=a(n.pageStateCell)[0],u=a(n.mainCell,t)[0];if(!u)return!1;var d,p,f=u.children.length,m=a(n.titCell,t),v=m?m.length:f,h=n.switchLoad,g=parseInt(n.defaultIndex),T=parseInt(n.delayTime),L=parseInt(n.interTime),b="false"!=n.autoPlay&&0!=n.autoPlay,C="false"!=n.autoPage&&0!=n.autoPage,w="false"!=n.pnLoop&&0!=n.pnLoop,y=null,x=null,N=null,E=0,I=0,P=0,k=0,M=/hp-tablet/gi.test(navigator.appVersion),S="ontouchstart"in window&&!M,F=S?"touchstart":"mousedown",D=S?"touchmove":"",B=S?"touchend":"mouseup",O=u.parentNode.clientWidth,A=f;if(0==v&&(v=f),C){v=f;var H=(m=m[0]).innerHTML="";if(1==n.autoPage||"true"==n.autoPage)for(var R=0;R<v;R++)H+="<li>"+(R+1)+"</li>";else for(R=0;R<v;R++)H+=n.autoPage.replace("$",R+1);m.innerHTML=H,m=m.children}"leftLoop"==r&&(A+=2,u.appendChild(u.children[0].cloneNode(!0)),u.insertBefore(u.children[f-1].cloneNode(!0),u.children[0])),d=function(e,t){var n=document.createElement("div");n.innerHTML=t,n=n.children[0];var a=e.cloneNode(!0);return n.appendChild(a),e.parentNode.replaceChild(n,e),u=a,n}(u,'<div class="tempWrap" style="overflow:hidden; position:relative;"></div>'),u.style.cssText="width:"+A*O+"px;position:relative;overflow:hidden;padding:0;margin:0;";for(R=0;R<A;R++)u.children[R].style.cssText="display:table-cell;vertical-align:top;width:"+O+"px";function z(e){function t(e){for(var t=u.children[e].getElementsByTagName("img"),n=0;n<t.length;n++)t[n].getAttribute(h)&&(t[n].setAttribute("src",t[n].getAttribute(h)),t[n].removeAttribute(h))}var n=("leftLoop"==r?g+1:g)+e;if(t(n),"leftLoop"==r)switch(n){case 0:t(f);break;case 1:t(f+1);break;case f:t(0);break;case f+1:t(1)}}window.addEventListener("resize",function(){O=d.clientWidth,u.style.width=A*O+"px";for(var e=0;e<A;e++)u.children[e].style.width=O+"px";X(-("leftLoop"==r?g+1:g)*O,0)},!1);function W(e){switch(r){case"left":v<=g?g=e?g-1:0:g<0&&(g=e?0:v-1),null!=h&&z(0),X(-g*O,T),0;break;case"leftLoop":null!=h&&z(0),X(-(g+1)*O,T),-1==g?(x=setTimeout(function(){X(-v*O,0)},T),g=v-1):g==v&&(x=setTimeout(function(){X(-O,0)},T),g=0),0}"function"==typeof n.startFun&&n.startFun(g,v),N=setTimeout(function(){"function"==typeof n.endFun&&n.endFun(g,v)},T);for(var t=0;t<v;t++)i(m[t],n.titOnClassName),t==g&&l(m[t],n.titOnClassName);0==w&&(i(s,"nextStop"),i(o,"prevStop"),0==g?l(o,"prevStop"):g==v-1&&l(s,"nextStop")),c&&(c.innerHTML="<span>"+(g+1)+"</span>/"+v)}var X=function(e,t,n){(n=n?n.style:u.style).webkitTransitionDuration=n.MozTransitionDuration=n.msTransitionDuration=n.OTransitionDuration=n.transitionDuration=t+"ms",n.webkitTransform="translate("+e+"px,0)translateZ(0)",n.msTransform=n.MozTransform=n.OTransform="translateX("+e+"px)"};if(W(),b&&(y=setInterval(function(){g++,W()},L)),m)for(R=0;R<v;R++)!function(){var t=R;m[t].addEventListener("click",function(e){clearTimeout(x),clearTimeout(N),g=t,W()})}();s&&s.addEventListener("click",function(e){1!=w&&g==v-1||(clearTimeout(x),clearTimeout(N),g++,W())}),o&&o.addEventListener("click",function(e){1!=w&&0==g||(clearTimeout(x),clearTimeout(N),g--,W())});var Y=function(e){if(!S||!(1<e.touches.length||e.scale&&1!==e.scale)){var t=S?e.touches[0]:e;if(P=t.pageX-E,k=t.pageY-I,void 0===p&&(p=!!(p||Math.abs(P)<Math.abs(k))),!p){switch(e.preventDefault(),b&&clearInterval(y),r){case"left":(0==g&&0<P||v-1<=g&&P<0)&&(P*=.4),X(-g*O+P,0);break;case"leftLoop":X(-(g+1)*O+P,0)}null!=h&&Math.abs(P)>O/3&&z(-0<P?-1:1)}}},V=function(e){0!=P&&(e.preventDefault(),p||(Math.abs(P)>O/10&&(0<P?g--:g++),W(!0),b&&(y=setInterval(function(){g++,W()},L))),u.removeEventListener(D,Y,!1),u.removeEventListener(B,V,!1))};u.addEventListener(F,function(e){clearTimeout(x),clearTimeout(N),p=void 0,P=0;var t=S?e.touches[0]:e;E=t.pageX,I=t.pageY,u.addEventListener(D,Y,!1),u.addEventListener(B,V,!1)},!1)};